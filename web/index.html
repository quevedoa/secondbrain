<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>secondbrain</title>
    <link rel="stylesheet" href="./styles.css" />
</head>

<body>
    <div class="app">
        <header class="header">
            <div>
                <h1>secondbrain</h1>
                <p class="subtle">Personal notes + retrieval chat</p>
            </div>
            <div class="status" id="statusBadge" aria-live="polite">Idle</div>
        </header>

        <main class="grid">
            <!-- Create note -->
            <section class="card">
                <h2>Create note</h2>
                <form id="noteForm" class="stack">
                    <label class="label">
                        Optional ID / title
                        <input id="noteId" class="input" placeholder="e.g., meeting-2025-12-26" />
                    </label>

                    <label class="label">
                        Content
                        <textarea id="noteContent" class="textarea" required placeholder="Write a note…"
                            rows="8"></textarea>
                    </label>

                    <div class="row">
                        <button class="btn" type="submit">Save note</button>
                        <button class="btn ghost" type="button" id="noteClearBtn">Clear</button>
                    </div>

                    <div class="hint" id="noteResult" aria-live="polite"></div>
                </form>
            </section>

            <!-- Chat -->
            <section class="card chatCard">
                <div class="chatHeader">
                    <h2>Ask your notes</h2>

                    <div class="row right">
                        <label class="label inline">
                            Context notes
                            <input id="numResults" class="input small" type="number" min="1" max="50" value="5" />
                        </label>
                        <button class="btn danger ghost" id="stopBtn" type="button" disabled>Stop</button>
                    </div>
                </div>

                <div id="chatLog" class="chatLog" role="log" aria-live="polite"></div>

                <form id="chatForm" class="chatComposer">
                    <input id="chatInput" class="input" placeholder="Ask a question…" autocomplete="off" required />
                    <button class="btn" type="submit" id="sendBtn">Send</button>
                </form>

                <div class="hint subtle" id="chatHint">
                    Streaming responses supported. You can abort mid-stream.
                </div>
            </section>
        </main>

        <footer class="footer subtle">
            Served from <code>/web</code> by your Go backend · APIs: <code>/api/CreateNote</code>,
            <code>/api/QueryNotes</code>
        </footer>
    </div>

    <script type="module" src="./app.js"></script>
</body>

</html>